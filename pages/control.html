<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Control IoT â€” Carbot</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Estilos opcionales -->
  <link rel="stylesheet" href="../assets/css/styles.css">

  <style>
    .action-btn{min-width:220px}
    .group-gap{gap:20px}
    .status-box{font-size:2rem;font-weight:800;letter-spacing:1px}
    .badge-big{font-size:.95rem}
  </style>
</head>
<body class="bg-light">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="../index.html">ðŸš— Carbot IoT</a>
      <div class="d-flex">
        <a class="btn btn-outline-light btn-sm" href="./monitor.html">Monitoreo</a>
        <a class="btn btn-warning btn-sm ms-2" href="./demo.html">Modo DEMO</a>
      </div>
    </div>
  </nav>

  <main class="container py-4">
    <h2 class="text-center fw-bold mb-4">APLICACIÃ“N DE CONTROL IoT</h2>

    <!-- Fila superior: vuelta adelante izq / adelante / vuelta adelante der -->
    <div class="d-flex flex-wrap justify-content-center group-gap my-3">
      <button class="btn btn-primary action-btn" data-status="5">Vuelta adelante izquierda</button>
      <button class="btn btn-primary action-btn" data-status="1">Adelante</button>
      <button class="btn btn-primary action-btn" data-status="4">Vuelta adelante derecha</button>
    </div>

    <!-- Fila media: giros 360/90 + detener -->
    <div class="d-flex flex-wrap justify-content-center group-gap my-3">
      <button class="btn btn-indigo action-btn btn-secondary" data-status="11">360 izquierda</button>
      <button class="btn btn-secondary action-btn" data-status="9">90 izquierda</button>
      <button class="btn btn-danger action-btn" data-status="3">Detener</button>
      <button class="btn btn-secondary action-btn" data-status="8">90 derecha</button>
      <button class="btn btn-indigo action-btn btn-secondary" data-status="10">360 derecha</button>
    </div>

    <!-- Fila inferior: vueltas atrÃ¡s + atrÃ¡s -->
    <div class="d-flex flex-wrap justify-content-center group-gap my-3">
      <button class="btn btn-warning action-btn" data-status="7">Vuelta atrÃ¡s izquierda</button>
      <button class="btn btn-warning action-btn" data-status="2">AtrÃ¡s</button>
      <button class="btn btn-warning action-btn" data-status="6">Vuelta atrÃ¡s derecha</button>
    </div>

    <!-- Estado inferior -->
    <div class="row mt-4">
      <div class="col-md-4 text-center">
        <p class="mb-1">ObstÃ¡culos</p>
        <div id="obstacleStatus" class="status-box text-muted">NINGUNO</div>
      </div>
      <div class="col-md-4 text-center">
        <p class="mb-1">Ãšltimo Status</p>
        <div id="lastStatus" class="status-box">â€”</div>
      </div>
      <div class="col-md-4 text-center">
        <p class="mb-2">SimulaciÃ³n</p>
        <button id="btnObstacleTemp" class="btn btn-danger">
          (Temporal) ObstÃ¡culo
        </button>
        <div class="mt-2">
          <span class="badge text-bg-secondary badge-big me-1" id="tzBadge">TZ</span>
          <span class="badge text-bg-light badge-big" id="deviceBadge">Device</span>
        </div>
      </div>
    </div>

    <div class="alert alert-info mt-4">
      <strong>Tip:</strong> Esta pantalla usa <em>fetch + async/await</em> para invocar a la API, y
      <em>Socket.IO</em> para recibir en vivo los eventos <code>movement:new</code> y
      <code>obstacle:new</code>.
    </div>
  </main>

  <footer class="text-center py-3 text-muted">
    Desarrollado por Pedro Daniel Molina Monroy
  </footer>

  <!-- Socket.IO client -->
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <!-- MÃ³dulos -->
  <script type="module" src="../js/config.js"></script>
  <script type="module" src="../js/api.js"></script>
  <script type="module" src="../js/sockets.js"></script>
  <script type="module" src="../js/ui.js"></script>
  <script type="module" src="../js/control.js"></script>
</body>
</html>
